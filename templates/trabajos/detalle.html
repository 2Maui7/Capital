{% extends 'base.html' %}

{% block title %}Trabajo #{{ trabajo.id }} - Imprenta Capital{% endblock %}
{% block page_title %}Detalle del Trabajo #{{ trabajo.id }}{% endblock %}
{% block page_subtitle %}Información completa del trabajo{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div>
      <i class="bi bi-briefcase me-2"></i>Trabajo #{{ trabajo.id }}
    </div>
    <div>
      <a href="{% url 'core:trabajo_editar' trabajo.pk %}" class="btn btn-sm btn-warning"><i class="bi bi-pencil me-1"></i> Editar</a>
      <a href="{% url 'core:trabajos_lista' %}" class="btn btn-sm btn-secondary"><i class="bi bi-arrow-left me-1"></i> Volver</a>
    </div>
  </div>
  <div class="card-body">
    <div class="row">
      <div class="col-md-6">
        <h5>Cliente</h5>
        <p class="mb-1"><strong>{{ trabajo.cliente.nombre }}</strong></p>
        <p class="text-muted">{{ trabajo.cliente.email|default:"-" }} | {{ trabajo.cliente.telefono|default:"-" }}</p>
      </div>
      <div class="col-md-6">
        <h5>Producto</h5>
        <p class="mb-1">{{ trabajo.producto.nombre|default:"-" }}</p>
        <p class="text-muted">{{ trabajo.producto.get_tipo_display|default:"-" }}</p>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-3">
        <h6>Cantidad</h6>
        <p>{{ trabajo.cantidad }}</p>
      </div>
      <div class="col-md-3">
        <h6>Precio Unitario</h6>
        <p>Bs. {{ trabajo.precio_unitario }}</p>
      </div>
      <div class="col-md-3">
        <h6>Descuento</h6>
        <p>{{ trabajo.descuento }}%</p>
      </div>
      <div class="col-md-3">
        <h6>Total</h6>
        <p><strong>Bs. {{ trabajo.precio_total }}</strong></p>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-6">
        <h6>Estado</h6>
        <p>{{ trabajo.get_estado_display }}</p>
      </div>
      <div class="col-md-6">
        <h6>Fechas</h6>
        <p>Creación: {{ trabajo.fecha_creacion|date:"d/m/Y" }}</p>
        <p>Entrega estimada: {{ trabajo.fecha_entrega|date:"d/m/Y" }}</p>
        <p>Entrega real: {{ trabajo.fecha_entregado|date:"d/m/Y"|default:"-" }}</p>
      </div>
    </div>
    <hr>
    <div>
      <h6>Descripción</h6>
      <p>{{ trabajo.descripcion|linebreaksbr }}</p>
    </div>
  </div>
</div>
{% endblock %}
